(this.webpackJsonphyperlocalweb=this.webpackJsonphyperlocalweb||[]).push([[0],{32:function(n,t,e){},40:function(n,t,e){"use strict";e.r(t);var o,a,i,c,s,r,l,d=e(1),b=e.n(d),j=e(21),h=e.n(j),p=(e(32),e(12)),g=e(3),u=e(10),x=e(5),O=e(16),f=e(26),m=e(6),v=e(2),w=m.a.div(o||(o=Object(x.a)(["\n  margin: 10px;\n"]))),S=m.a.div(a||(a=Object(x.a)(["\n  position: relative;\n  align-items: left;\n  justify-content: center;\n  height: 15vh;\n  margin-bottom: 10px;\n  // padding: 10px;\n  width: 100%;\n  background-color: #ebebeb;\n  border-radius: 10px;\n  box-shadow: 1px 1px 1px grey;\n"]))),I=m.a.div(i||(i=Object(x.a)(["\n  position: absolute;\n  left: 10px;\n  top: 10px;\n  font-size: 1.1em;\n  font-weight: bold;\n"]))),k=m.a.div(c||(c=Object(x.a)(["\n  position: absolute;\n  margin-left: 10px;\n  top: 35px;\n  font-size: 0.9em;\n"]))),C=m.a.div(s||(s=Object(x.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 10px;\n  padding-bottom: 5px;\n  font-size: 0.8em;\n"]))),z=m.a.div(r||(r=Object(x.a)(["\n  position: absolute;\n  padding-right: 20px;\n  right: 0px;\n  bottom: 0px;\n  padding-bottom: 5px;\n"]))),y=m.a.div(l||(l=Object(x.a)(["\n  position: absolute;\n  right: 20px;\n  top: 20px;\n"])));function M(n,t,e,o,a){if(n===e&&t===o)return 0;var i=Math.PI*n/180,c=Math.PI*e/180,s=t-o,r=Math.PI*s/180,l=Math.sin(i)*Math.sin(c)+Math.cos(i)*Math.cos(c)*Math.cos(r);return l>1&&(l=1),l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515,"K"===a&&(l*=1.609344),"N"===a&&(l*=.8684),l.toFixed(2)}function L(){var n=b.a.useState([]),t=Object(u.a)(n,2),e=t[0],o=t[1],a=Object(g.g)();Object(d.useEffect)((function(){fetch("/data/shops.json").then((function(n){return n.json()})).then((function(n){o(n)})),setTimeout((function(){}),1e3)}),[]);var i=localStorage.getItem("latlng"),c=localStorage.getItem("address");return i=JSON.parse(i),c&&i&&i.lat&&i.lng?Object(v.jsxs)("div",{children:[Object(v.jsx)(O.a,{}),Object(v.jsx)("a",{href:"/start",children:c}),Object(v.jsx)("br",{}),Object(v.jsx)(v.Fragment,{children:"delivering here..."}),Object(v.jsx)("h3",{children:"Shops nearby"}),Object(v.jsx)(w,{children:e.map((function(n){return Object(v.jsxs)(S,{onClick:function(t){console.log(n.name),a.push("/shop/".concat(n.id))},children:[Object(v.jsx)(I,{children:n.name}),Object(v.jsx)(k,{children:n.description}),Object(v.jsx)(C,{children:n.address}),Object(v.jsx)(y,{onClick:function(n){n.stopPropagation()},children:Object(v.jsx)("a",{href:"https://wa.me/"+n.phone,children:Object(v.jsx)(f.a,{})})}),Object(v.jsxs)(z,{onClick:function(n){n.stopPropagation()},children:[Object(v.jsx)(O.a,{}),Object(v.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"https://maps.google.com/?q="+n.latlng,children:[M(n.latlng.split(",")[0],n.latlng.split(",")[1],i.lat,i.lng,"K")," ","Km"]})]})]})}))})]}):Object(v.jsx)(g.a,{to:"/start"})}var E,N,P,T,J,_,A,G,D,F,K,R,Y=e(42),B=e(27),H=new Y.a("AIzaSyA89Ry51DT28yrjSGJHGe9-zTYLCZO0zCY",{}),U=m.a.div(E||(E=Object(x.a)(["\n  font-size: 1.5em;\n  font-weight: bold;\n  padding: 0.25em;\n  // margin: 0.5em;\n  text-align: center;\n  color: #550394;\n  height: 50px;\n  background-color: #eee;\n"]))),Z=m.a.div(N||(N=Object(x.a)(["\n  position: absolute;\n  top: 50px;\n  bottom: 150px;\n  width: 100%;\n  z-index: 0;\n"]))),q=m.a.div(P||(P=Object(x.a)(["\n  font-weight: bold;\n  font-size: 1em;\n  padding-top: 0.5em;\n"]))),V=m.a.button(T||(T=Object(x.a)(["\n  width: 90%;\n  left: 5%;\n  height: 50px;\n  position: absolute;\n  margin-top: 10px;\n  bottom: 15px;\n  font-size: 12px;\n  font-weight: bold;\n  border-radius: 8px;\n  color: #fff;\n  border: none;\n  background-color: #550394;\n\n  &:disabled {\n    background-color: #9fa3e3;\n  }\n"]))),Q=m.a.div(J||(J=Object(x.a)(["\n  position: absolute;\n  font-size: 13px;\n  width: 100%;\n  height: 150px;\n  bottom: 0;\n  background-color: #eee;\n\n  div {\n    padding-left: 0.75em;\n    padding-right: 0.75em;\n    padding-top: 0.5em;\n  }\n"]))),W=m.a.div(_||(_=Object(x.a)(["\n  color: #969595;\n  font-weight: bold;\n  font-size: 12px;\n"]))),X=m.a.div(A||(A=Object(x.a)(['\n  clear: both;\n  background: #000;\n  border-radius: 8px;\n  color: #fff;\n  // display: inline-block;\n  font-size: 0.7em;\n  font-weight: bold;\n  padding: 6px;\n  line-height: 1em;\n  margin: 0 auto;\n  margin-top: -89px; // high precision stuff\n  top: 50%;\n  left: 55%; // high precision stuff\n  margin-left: -100px;\n  position: absolute;\n  text-align: center;\n  pointer-events: none;\n  vertical-align: top;\n  min-width: 7em;\n\n  &:after {\n    border: 1em solid transparent;\n    border-top-color: #000;\n    content: "";\n    margin-left: -1em;\n    position: absolute;\n    top: 90%;\n    left: 50%;\n    width: 0;\n    height: 0;\n  }\n\n  span {\n    font-size: 0.9em;\n    color: #c2c2c2;\n    font-weight: normal;\n  }\n']))),$=m.a.div(G||(G=Object(x.a)(["\n  position: absolute;\n  bottom: 170px;\n  right: 10px;\n\n  button {\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n  }\n"]))),nn=localStorage.getItem("latlng");function tn(){var n=b.a.useState(nn),t=Object(u.a)(n,2),e=t[0],o=t[1],a=b.a.useState(""),i=Object(u.a)(a,2),c=i[0],s=i[1],r=b.a.useState(!1),l=Object(u.a)(r,2),j=l[0],h=l[1],p=Object(g.g)();Object(d.useEffect)((function(){console.log("Mappicker mounted"),H.load().then((function(n){F=new(D=n).maps.Geocoder,(R=new n.maps.Map(document.getElementById("map"),{center:nn,zoom:10,disableDefaultUI:!0})).addListener("center_changed",(function(){K&&clearTimeout(K),K=window.setTimeout((function(){var n=R.getCenter().lat(),t=R.getCenter().lng();o({lat:n,lng:t})}),500)}))}))}),[]),Object(d.useEffect)((function(){console.log("latlng changed"),console.log(e),F&&(s("updating..."),h(!0),F.geocode({location:{lat:e.lat,lng:e.lng}}).then((function(n){n.results[0]?(h(!1),s(n.results[0].formatted_address)):window.alert("No results found")})).catch((function(n){return window.alert("Geocoder failed due to: "+n)})))}),[e]);var x=Object(d.useCallback)((function(){s("Please wait..."),h(!0),navigator.geolocation.getCurrentPosition((function(n){var t=new D.maps.LatLng(n.coords.latitude,n.coords.longitude);R.panTo(t),R.setZoom(18),o({lat:n.coords.latitude,lng:n.coords.longitude}),h(!1)}),(function(){console.log("User blocked location access"),h(!1)}))}),[]),f=Object(d.useCallback)((function(){console.log("confirmLocation"),console.log(e),localStorage.setItem("latlng",JSON.stringify(e)),localStorage.setItem("address",c),p.push("/home")}),[c,e,p]);return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(U,{children:"HyperLocal"}),Object(v.jsx)(Z,{id:"map",children:" "}),Object(v.jsxs)(X,{children:[Object(v.jsx)("div",{children:" Order will be delivered here"}),Object(v.jsx)("span",{children:"Place the pin accurately on the map"})]})]}),Object(v.jsx)($,{children:Object(v.jsx)("button",{onClick:x,disabled:j,children:Object(v.jsx)(B.a,{})})}),Object(v.jsxs)(Q,{children:[Object(v.jsx)(W,{children:" SELECT DELIVERY LOCATION "}),Object(v.jsxs)(q,{children:[Object(v.jsx)(O.a,{}),c]}),Object(v.jsx)(V,{onClick:f,disabled:j,children:"CONFIRM LOCATION"})]})]})}function en(){var n=localStorage.getItem("latlng");return n=JSON.parse(n),console.log(n),n&&n.lat&&n.lng?Object(v.jsx)(g.a,{to:"/home"}):Object(v.jsx)(g.a,{to:"/start"})}function on(n){var t=Object(g.h)().shopId,e=b.a.useState(!0),o=Object(u.a)(e,2),a=o[0],i=o[1],c=b.a.useState([]),s=Object(u.a)(c,2),r=s[0],l=s[1];return Object(d.useEffect)((function(){fetch("/data/shop/"+t+".json").then((function(n){return n.json()})).then((function(n){l(n),i(!1),console.log(n)}))}),[t]),console.log(t),a?Object(v.jsx)("div",{children:"Loading..."}):Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:r.shop_details.shop_name}),r.items.map((function(n){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:n.name}),Object(v.jsx)("p",{children:n.description})]})}))]})}(nn=JSON.parse(nn))&&nn.lat&&nn.lng||(nn={lat:10.61878,lng:76.21538});var an=function(){return Object(v.jsx)(p.a,{children:Object(v.jsxs)(g.d,{children:[Object(v.jsx)(g.b,{path:"/start",children:Object(v.jsx)(tn,{})}),Object(v.jsx)(g.b,{path:"/home",children:Object(v.jsx)(L,{})}),Object(v.jsx)(g.b,{path:"/shop/:shopId",children:Object(v.jsx)(on,{})}),Object(v.jsx)(g.b,{path:"/",children:Object(v.jsx)(en,{})})]})})};h.a.render(Object(v.jsx)(b.a.StrictMode,{children:Object(v.jsx)(an,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.032e4f84.chunk.js.map